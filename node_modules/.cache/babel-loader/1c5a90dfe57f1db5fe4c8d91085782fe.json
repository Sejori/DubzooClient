{"ast":null,"code":"import _regeneratorRuntime from \"/Users/sebringrose/Projects/Dubzoo/app/client/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/sebringrose/Projects/Dubzoo/app/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"/Users/sebringrose/Projects/Dubzoo/app/client/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/Users/sebringrose/Projects/Dubzoo/app/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/sebringrose/Projects/Dubzoo/app/client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/sebringrose/Projects/Dubzoo/app/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/sebringrose/Projects/Dubzoo/app/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/sebringrose/Projects/Dubzoo/app/client/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/sebringrose/Projects/Dubzoo/app/client/src/components/auth/StrapiAuth.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\n\nvar StrapiAuth =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(StrapiAuth, _Component);\n\n  function StrapiAuth(props) {\n    var _this;\n\n    _classCallCheck(this, StrapiAuth);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(StrapiAuth).call(this, props));\n\n    _this.Register = function () {\n      if (_this.usernameInput || _this.passwordInput || _this.emailInput === undefined) {\n        alert(\"Please input username, email and password to register!\");\n        return;\n      } // Request API.\n\n\n      axios.post('http://localhost:1337/auth/local/register', {\n        username: _this.state.usernameInput,\n        email: _this.state.emailInput,\n        password: _this.state.passwordInput\n      }).then(function (response) {\n        // Update React State Credentials\n        _this.props.UpdateUser(response.data.user.username, response.data.jwt);\n      }).catch(function (error) {\n        // Handle error.\n        console.log('An error occurred:', error);\n      });\n    };\n\n    _this.Login = function () {\n      if (_this.usernameInput || _this.passwordInput === \"\") {\n        alert(\"Please input username and password to login!\");\n        return;\n      } // Request API\n\n\n      axios.post('http://localhost:1337/auth/local', {\n        identifier: _this.state.usernameInput,\n        password: _this.state.passwordInput\n      }).then(function (response) {\n        // Update React State Credentials\n        _this.props.UpdateUser(response.data.user.username, response.data.jwt);\n      }).catch(function (error) {\n        // Handle error.\n        console.log('An error occurred:', error);\n      });\n    };\n\n    _this.Logout = function () {\n      _this.setState({\n        usernameInput: \"\"\n      });\n\n      _this.props.UpdateUser(undefined, undefined);\n    };\n\n    _this.handleChange = function (_ref) {\n      var target = _ref.target;\n\n      _this.setState(_defineProperty({}, target.name, target.value));\n    };\n\n    _this.state = {\n      usernameInput: \"\",\n      emailInput: \"\",\n      passwordInput: \"\"\n    };\n    return _this;\n  } // PUT AXIOS AUTH FUNCTIONS HERE\n\n\n  _createClass(StrapiAuth, [{\n    key: \"getData\",\n    value: function () {\n      var _getData = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        var res;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return axios('/data');\n\n              case 2:\n                res = _context.sent;\n                _context.next = 5;\n                return res.json();\n\n              case 5:\n                return _context.abrupt(\"return\", _context.sent);\n\n              case 6:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function getData() {\n        return _getData.apply(this, arguments);\n      }\n\n      return getData;\n    }()\n  }, {\n    key: \"render\",\n    value: function render() {\n      switch (this.props.user) {\n        case undefined:\n          return React.createElement(\"div\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 84\n            },\n            __self: this\n          }, React.createElement(\"input\", {\n            name: \"usernameInput\",\n            type: \"text\",\n            placeholder: \"Username\",\n            value: this.state.usernameInput,\n            onChange: this.handleChange,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 85\n            },\n            __self: this\n          }), React.createElement(\"input\", {\n            name: \"passwordInput\",\n            type: \"password\",\n            placeholder: \"Password\",\n            value: this.state.PasswordInput,\n            onChange: this.handleChange,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 92\n            },\n            __self: this\n          }), React.createElement(\"button\", {\n            onClick: this.Login,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 99\n            },\n            __self: this\n          }, \"Login\"), React.createElement(\"br\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 100\n            },\n            __self: this\n          }), React.createElement(\"input\", {\n            name: \"emailInput\",\n            type: \"text\",\n            placeholder: \"Email\",\n            value: this.state.emailInput,\n            onChange: this.handleChange,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 101\n            },\n            __self: this\n          }), React.createElement(\"button\", {\n            onClick: this.Register,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 108\n            },\n            __self: this\n          }, \"Register\"));\n\n        default:\n          return React.createElement(\"div\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 114\n            },\n            __self: this\n          }, \"Hi \", this.state.usernameInput, \"!\", React.createElement(\"button\", {\n            onClick: this.Logout,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 116\n            },\n            __self: this\n          }, \"LOGOUT\"));\n      }\n    }\n  }]);\n\n  return StrapiAuth;\n}(Component);\n\nexport default StrapiAuth;","map":{"version":3,"sources":["/Users/sebringrose/Projects/Dubzoo/app/client/src/components/auth/StrapiAuth.js"],"names":["React","Component","axios","StrapiAuth","props","Register","usernameInput","passwordInput","emailInput","undefined","alert","post","username","state","email","password","then","response","UpdateUser","data","user","jwt","catch","error","console","log","Login","identifier","Logout","setState","handleChange","target","name","value","res","json","PasswordInput"],"mappings":";;;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,KAAP,MAAkB,OAAlB;;IAEMC,U;;;;;AAEJ,sBAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACjB,oFAAMA,KAAN;;AADiB,UAgBnBC,QAhBmB,GAgBR,YAAM;AAEf,UAAI,MAAKC,aAAL,IAAsB,MAAKC,aAA3B,IAA4C,MAAKC,UAAL,KAAoBC,SAApE,EAAgF;AAC9EC,QAAAA,KAAK,CAAC,wDAAD,CAAL;AACA;AACD,OALc,CAMf;;;AACAR,MAAAA,KAAK,CACFS,IADH,CACQ,2CADR,EACqD;AACjDC,QAAAA,QAAQ,EAAE,MAAKC,KAAL,CAAWP,aAD4B;AAEjDQ,QAAAA,KAAK,EAAE,MAAKD,KAAL,CAAWL,UAF+B;AAGjDO,QAAAA,QAAQ,EAAE,MAAKF,KAAL,CAAWN;AAH4B,OADrD,EAMGS,IANH,CAMQ,UAAAC,QAAQ,EAAI;AAChB;AACA,cAAKb,KAAL,CAAWc,UAAX,CAAsBD,QAAQ,CAACE,IAAT,CAAcC,IAAd,CAAmBR,QAAzC,EAAmDK,QAAQ,CAACE,IAAT,CAAcE,GAAjE;AACD,OATH,EAUGC,KAVH,CAUS,UAAAC,KAAK,EAAI;AACd;AACAC,QAAAA,OAAO,CAACC,GAAR,CAAY,oBAAZ,EAAkCF,KAAlC;AACD,OAbH;AAcD,KArCkB;;AAAA,UAuCnBG,KAvCmB,GAuCX,YAAM;AAEZ,UAAI,MAAKpB,aAAL,IAAsB,MAAKC,aAAL,KAAuB,EAAjD,EAAsD;AACpDG,QAAAA,KAAK,CAAC,8CAAD,CAAL;AACA;AACD,OALW,CAOZ;;;AACAR,MAAAA,KAAK,CACFS,IADH,CACQ,kCADR,EAC4C;AACtCgB,QAAAA,UAAU,EAAE,MAAKd,KAAL,CAAWP,aADe;AAEtCS,QAAAA,QAAQ,EAAE,MAAKF,KAAL,CAAWN;AAFiB,OAD5C,EAKGS,IALH,CAKQ,UAAAC,QAAQ,EAAI;AAChB;AACA,cAAKb,KAAL,CAAWc,UAAX,CAAsBD,QAAQ,CAACE,IAAT,CAAcC,IAAd,CAAmBR,QAAzC,EAAmDK,QAAQ,CAACE,IAAT,CAAcE,GAAjE;AACD,OARH,EASGC,KATH,CASS,UAAAC,KAAK,EAAI;AACd;AACAC,QAAAA,OAAO,CAACC,GAAR,CAAY,oBAAZ,EAAkCF,KAAlC;AACD,OAZH;AAaD,KA5DkB;;AAAA,UA8DnBK,MA9DmB,GA8DV,YAAM;AACb,YAAKC,QAAL,CAAc;AAAEvB,QAAAA,aAAa,EAAE;AAAjB,OAAd;;AACA,YAAKF,KAAL,CAAWc,UAAX,CAAsBT,SAAtB,EAAiCA,SAAjC;AACD,KAjEkB;;AAAA,UAmEnBqB,YAnEmB,GAmEJ,gBAAgB;AAAA,UAAbC,MAAa,QAAbA,MAAa;;AAC7B,YAAKF,QAAL,qBACGE,MAAM,CAACC,IADV,EACiBD,MAAM,CAACE,KADxB;AAGD,KAvEkB;;AAGjB,UAAKpB,KAAL,GAAa;AACXP,MAAAA,aAAa,EAAE,EADJ;AAEXE,MAAAA,UAAU,EAAE,EAFD;AAGXD,MAAAA,aAAa,EAAE;AAHJ,KAAb;AAHiB;AAQlB,G,CAED;;;;;;;;;;;;;;;uBAEmBL,KAAK,CAAC,OAAD,C;;;AAAjBgC,gBAAAA,G;;uBACOA,GAAG,CAACC,IAAJ,E;;;;;;;;;;;;;;;;;;;;;6BA4DL;AACP,cAAQ,KAAK/B,KAAL,CAAWgB,IAAnB;AAEE,aAAKX,SAAL;AACE,iBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aACE;AACE,YAAA,IAAI,EAAC,eADP;AAEE,YAAA,IAAI,EAAC,MAFP;AAGE,YAAA,WAAW,EAAC,UAHd;AAIE,YAAA,KAAK,EAAE,KAAKI,KAAL,CAAWP,aAJpB;AAKE,YAAA,QAAQ,EAAE,KAAKwB,YALjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADF,EAQE;AACE,YAAA,IAAI,EAAC,eADP;AAEE,YAAA,IAAI,EAAC,UAFP;AAGE,YAAA,WAAW,EAAC,UAHd;AAIE,YAAA,KAAK,EAAE,KAAKjB,KAAL,CAAWuB,aAJpB;AAKE,YAAA,QAAQ,EAAE,KAAKN,YALjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YARF,EAeE;AAAQ,YAAA,OAAO,EAAE,KAAKJ,KAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAfF,EAgBE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAhBF,EAiBE;AACE,YAAA,IAAI,EAAC,YADP;AAEE,YAAA,IAAI,EAAC,MAFP;AAGE,YAAA,WAAW,EAAC,OAHd;AAIE,YAAA,KAAK,EAAE,KAAKb,KAAL,CAAWL,UAJpB;AAKE,YAAA,QAAQ,EAAE,KAAKsB,YALjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAjBF,EAwBE;AAAQ,YAAA,OAAO,EAAE,KAAKzB,QAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAxBF,CADF;;AA6BF;AACE,iBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACM,KAAKQ,KAAL,CAAWP,aADjB,OAEE;AAAQ,YAAA,OAAO,EAAE,KAAKsB,MAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAFF,CADF;AAjCJ;AAwCD;;;;EApHsB3B,S;;AAwHzB,eAAeE,UAAf","sourcesContent":["import React, { Component } from 'react';\nimport axios from 'axios';\n\nclass StrapiAuth extends Component {\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      usernameInput: \"\",\n      emailInput: \"\",\n      passwordInput: \"\"\n    }\n  }\n\n  // PUT AXIOS AUTH FUNCTIONS HERE\n  async getData(){\n   const res = await axios('/data');\n   return await res.json();\n}\n\n  Register = () => {\n\n    if (this.usernameInput || this.passwordInput || this.emailInput === undefined ) {\n      alert(\"Please input username, email and password to register!\");\n      return;\n    }\n    // Request API.\n    axios\n      .post('http://localhost:1337/auth/local/register', {\n        username: this.state.usernameInput,\n        email: this.state.emailInput,\n        password: this.state.passwordInput\n      })\n      .then(response => {\n        // Update React State Credentials\n        this.props.UpdateUser(response.data.user.username, response.data.jwt);\n      })\n      .catch(error => {\n        // Handle error.\n        console.log('An error occurred:', error);\n      });\n  }\n\n  Login = () => {\n\n    if (this.usernameInput || this.passwordInput === \"\" ) {\n      alert(\"Please input username and password to login!\");\n      return;\n    }\n\n    // Request API\n    axios\n      .post('http://localhost:1337/auth/local', {\n          identifier: this.state.usernameInput,\n          password: this.state.passwordInput\n      })\n      .then(response => {\n        // Update React State Credentials\n        this.props.UpdateUser(response.data.user.username, response.data.jwt);\n      })\n      .catch(error => {\n        // Handle error.\n        console.log('An error occurred:', error);\n      });\n  }\n\n  Logout = () => {\n    this.setState({ usernameInput: \"\" })\n    this.props.UpdateUser(undefined, undefined);\n  }\n\n  handleChange = ({ target }) => {\n    this.setState({\n      [target.name]: target.value\n    });\n  }\n\n  render() {\n    switch (this.props.user) {\n\n      case undefined:\n        return(\n          <div>\n            <input\n              name=\"usernameInput\"\n              type=\"text\"\n              placeholder=\"Username\"\n              value={this.state.usernameInput}\n              onChange={this.handleChange}\n            />\n            <input\n              name=\"passwordInput\"\n              type=\"password\"\n              placeholder=\"Password\"\n              value={this.state.PasswordInput}\n              onChange={this.handleChange}\n            />\n            <button onClick={this.Login}>Login</button>\n            <br />\n            <input\n              name=\"emailInput\"\n              type=\"text\"\n              placeholder=\"Email\"\n              value={this.state.emailInput}\n              onChange={this.handleChange}\n            />\n            <button onClick={this.Register}>Register</button>\n          </div>\n        )\n\n      default:\n        return(\n          <div>\n            Hi {this.state.usernameInput}!\n            <button onClick={this.Logout}>LOGOUT</button>\n          </div>\n        )\n    }\n  }\n\n}\n\nexport default StrapiAuth;\n"]},"metadata":{},"sourceType":"module"}