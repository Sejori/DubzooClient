{"ast":null,"code":"import _regeneratorRuntime from \"/Users/sebringrose/Projects/Dubzoo/app/client/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/sebringrose/Projects/Dubzoo/app/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"/Users/sebringrose/Projects/Dubzoo/app/client/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/Users/sebringrose/Projects/Dubzoo/app/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/sebringrose/Projects/Dubzoo/app/client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/sebringrose/Projects/Dubzoo/app/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/sebringrose/Projects/Dubzoo/app/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/sebringrose/Projects/Dubzoo/app/client/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/sebringrose/Projects/Dubzoo/app/client/src/components/auth/StrapiAuth.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\n\nvar StrapiAuth =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(StrapiAuth, _Component);\n\n  function StrapiAuth(props) {\n    var _this;\n\n    _classCallCheck(this, StrapiAuth);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(StrapiAuth).call(this, props));\n\n    _this.Login = function () {\n      console.log(\"login\");\n      axios.post('http://localhost:1337/auth/local', {\n        identifier: _this.state.emailInput,\n        password: _this.state.passwordInput\n      }).then(function (response) {\n        // Handle success.\n        console.log('Well done!');\n        console.log('User profile', response.data.user);\n        console.log('User token', response.data.jwt);\n\n        _this.setState({\n          user: response.data.user,\n          jwt: response.data.jwt\n        });\n      }).catch(function (error) {\n        // Handle error.\n        console.log('An error occurred:', error);\n      });\n    };\n\n    _this.Logout = function () {\n      console.log(\"logout\");\n\n      _this.setState({\n        user: \"\"\n      });\n    };\n\n    _this.handleChange = function (_ref) {\n      var target = _ref.target;\n\n      _this.setState(_defineProperty({}, target.name, target.value));\n    };\n\n    _this.state = {\n      user: \"\",\n      jwt: \"\",\n      emailInput: \"\",\n      passwordInput: \"\"\n    };\n    return _this;\n  } // PUT AXIOS AUTH FUNCTIONS HERE\n\n\n  _createClass(StrapiAuth, [{\n    key: \"getData\",\n    value: function () {\n      var _getData = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        var res;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return axios('/data');\n\n              case 2:\n                res = _context.sent;\n                _context.next = 5;\n                return res.json();\n\n              case 5:\n                return _context.abrupt(\"return\", _context.sent);\n\n              case 6:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function getData() {\n        return _getData.apply(this, arguments);\n      }\n\n      return getData;\n    }()\n  }, {\n    key: \"render\",\n    value: function render() {\n      switch (this.state.user) {\n        case \"\":\n          return React.createElement(\"div\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 63\n            },\n            __self: this\n          }, React.createElement(\"input\", {\n            name: \"emailInput\",\n            type: \"text\",\n            placeholder: \"Email\",\n            value: this.state.emailInput,\n            onChange: this.handleChange,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 64\n            },\n            __self: this\n          }), React.createElement(\"input\", {\n            name: \"passwordInput\",\n            type: \"password\",\n            placeholder: \"Password\",\n            value: this.state.PasswordInput,\n            onChange: this.handleChange,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 71\n            },\n            __self: this\n          }), React.createElement(\"button\", {\n            onClick: this.Login,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 78\n            },\n            __self: this\n          }, \"Login\"), React.createElement(\"button\", {\n            onClick: this.Register,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 79\n            },\n            __self: this\n          }, \"Register\"));\n\n        default:\n          return React.createElement(\"div\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 85\n            },\n            __self: this\n          }, \"Hi \", this.state.user, \"!\", React.createElement(\"button\", {\n            onClick: this.Logout,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 87\n            },\n            __self: this\n          }, \"LOGOUT\"));\n      }\n    }\n  }]);\n\n  return StrapiAuth;\n}(Component);\n\nexport default StrapiAuth;","map":{"version":3,"sources":["/Users/sebringrose/Projects/Dubzoo/app/client/src/components/auth/StrapiAuth.js"],"names":["React","Component","axios","StrapiAuth","props","Login","console","log","post","identifier","state","emailInput","password","passwordInput","then","response","data","user","jwt","setState","catch","error","Logout","handleChange","target","name","value","res","json","PasswordInput","Register"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport axios from 'axios';\n\nclass StrapiAuth extends Component {\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      user: \"\",\n      jwt: \"\",\n      emailInput: \"\",\n      passwordInput: \"\"\n    }\n  }\n\n  // PUT AXIOS AUTH FUNCTIONS HERE\n  async getData(){\n   const res = await axios('/data');\n   return await res.json();\n}\n\n  Login = () => {\n    console.log(\"login\");\n\n    axios\n      .post('http://localhost:1337/auth/local', {\n          identifier: this.state.emailInput,\n          password: this.state.passwordInput\n      })\n      .then(response => {\n        // Handle success.\n        console.log('Well done!');\n        console.log('User profile', response.data.user);\n        console.log('User token', response.data.jwt);\n        this.setState({\n          user: response.data.user,\n          jwt: response.data.jwt\n        })\n      })\n      .catch(error => {\n        // Handle error.\n        console.log('An error occurred:', error);\n      });\n  }\n\n  Logout = () => {\n    console.log(\"logout\");\n    this.setState({ user: \"\" })\n  }\n\n  handleChange = ({ target }) => {\n    this.setState({\n      [target.name]: target.value\n    });\n  }\n\n  render() {\n    switch (this.state.user) {\n\n      case \"\":\n        return(\n          <div>\n            <input\n              name=\"emailInput\"\n              type=\"text\"\n              placeholder=\"Email\"\n              value={this.state.emailInput}\n              onChange={this.handleChange}\n            />\n            <input\n              name=\"passwordInput\"\n              type=\"password\"\n              placeholder=\"Password\"\n              value={this.state.PasswordInput}\n              onChange={this.handleChange}\n            />\n            <button onClick={this.Login}>Login</button>\n            <button onClick={this.Register}>Register</button>\n          </div>\n        )\n\n      default:\n        return(\n          <div>\n            Hi {this.state.user}!\n            <button onClick={this.Logout}>LOGOUT</button>\n          </div>\n        )\n    }\n  }\n\n}\n\nexport default StrapiAuth;\n"]},"metadata":{},"sourceType":"module"}