{"ast":null,"code":"import _defineProperty from \"/Users/sebringrose/Projects/Dubzoo/app/client/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _regeneratorRuntime from \"/Users/sebringrose/Projects/Dubzoo/app/client/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/sebringrose/Projects/Dubzoo/app/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/Users/sebringrose/Projects/Dubzoo/app/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/sebringrose/Projects/Dubzoo/app/client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/sebringrose/Projects/Dubzoo/app/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/sebringrose/Projects/Dubzoo/app/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/sebringrose/Projects/Dubzoo/app/client/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/sebringrose/Projects/Dubzoo/app/client/src/components/auth/StrapiAuth.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\n\nvar StrapiAuth =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(StrapiAuth, _Component);\n\n  function StrapiAuth(props) {\n    var _this;\n\n    _classCallCheck(this, StrapiAuth);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(StrapiAuth).call(this, props));\n    _this.Login =\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee() {\n      var res, user, jwt;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              console.log(\"login\");\n              _context.next = 3;\n              return axios.post('localhost:1337/auth/local', {\n                \"identifier\": _this.state.emailInput,\n                \"password\": _this.state.passwordInput\n              });\n\n            case 3:\n              res = _context.sent;\n              user = res.json().user;\n              jwt = res.json().jwt;\n              console.log(user, jwt);\n\n              _this.setState({\n                user: {\n                  user: user\n                },\n                jwt: {\n                  jwt: jwt\n                }\n              });\n\n            case 8:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, this);\n    }));\n\n    _this.Logout = function () {\n      console.log(\"logout\");\n\n      _this.setState({\n        user: \"\"\n      });\n    };\n\n    _this.handleChange = function (_ref2) {\n      var target = _ref2.target;\n\n      _this.setState(_defineProperty({}, target.name, target.value));\n    };\n\n    _this.state = {\n      user: \"\",\n      jwt: \"\",\n      emailInput: \"\",\n      passwordInput: \"\"\n    };\n    return _this;\n  } // PUT AXIOS AUTH FUNCTIONS HERE\n\n\n  _createClass(StrapiAuth, [{\n    key: \"getData\",\n    value: function () {\n      var _getData = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2() {\n        var res;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return axios('/data');\n\n              case 2:\n                res = _context2.sent;\n                _context2.next = 5;\n                return res.json();\n\n              case 5:\n                return _context2.abrupt(\"return\", _context2.sent);\n\n              case 6:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function getData() {\n        return _getData.apply(this, arguments);\n      }\n\n      return getData;\n    }()\n  }, {\n    key: \"render\",\n    value: function render() {\n      switch (this.state.user) {\n        case \"\":\n          return React.createElement(\"div\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 56\n            },\n            __self: this\n          }, React.createElement(\"input\", {\n            name: \"emailInput\",\n            type: \"text\",\n            placeholder: \"Email\",\n            value: this.state.emailInput,\n            onChange: this.handleChange,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 57\n            },\n            __self: this\n          }), React.createElement(\"input\", {\n            name: \"passwordInput\",\n            type: \"password\",\n            placeholder: \"Password\",\n            value: this.state.PasswordInput,\n            onChange: this.handleChange,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 64\n            },\n            __self: this\n          }), React.createElement(\"button\", {\n            onClick: this.Login,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 71\n            },\n            __self: this\n          }, \"Login / Sign-Up\"));\n\n        default:\n          return React.createElement(\"div\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 77\n            },\n            __self: this\n          }, \"Hi \", this.state.user, \"!\", React.createElement(\"button\", {\n            onClick: this.Logout,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 79\n            },\n            __self: this\n          }, \"LOGOUT\"));\n      }\n    }\n  }]);\n\n  return StrapiAuth;\n}(Component);\n\nexport default StrapiAuth;","map":{"version":3,"sources":["/Users/sebringrose/Projects/Dubzoo/app/client/src/components/auth/StrapiAuth.js"],"names":["React","Component","axios","StrapiAuth","props","Login","console","log","post","state","emailInput","passwordInput","res","user","json","jwt","setState","Logout","handleChange","target","name","value","PasswordInput"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport axios from 'axios';\n\nclass StrapiAuth extends Component {\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      user: \"\",\n      jwt: \"\",\n      emailInput: \"\",\n      passwordInput: \"\"\n    }\n  }\n\n  // PUT AXIOS AUTH FUNCTIONS HERE\n  async getData(){\n   const res = await axios('/data');\n   return await res.json();\n}\n\n  Login = async() => {\n    console.log(\"login\");\n    const res = await axios.post('localhost:1337/auth/local', {\n      \"identifier\": this.state.emailInput,\n      \"password\": this.state.passwordInput\n    });\n    let user = res.json().user;\n    let jwt = res.json().jwt;\n\n    console.log(user, jwt);\n\n    this.setState({\n      user: { user },\n      jwt: { jwt }\n    })\n  }\n\n  Logout = () => {\n    console.log(\"logout\");\n    this.setState({ user: \"\" })\n  }\n\n  handleChange = ({ target }) => {\n    this.setState({\n      [target.name]: target.value\n    });\n  }\n\n  render() {\n    switch (this.state.user) {\n\n      case \"\":\n        return(\n          <div>\n            <input\n              name=\"emailInput\"\n              type=\"text\"\n              placeholder=\"Email\"\n              value={this.state.emailInput}\n              onChange={this.handleChange}\n            />\n            <input\n              name=\"passwordInput\"\n              type=\"password\"\n              placeholder=\"Password\"\n              value={this.state.PasswordInput}\n              onChange={this.handleChange}\n            />\n            <button onClick={this.Login}>Login / Sign-Up</button>\n          </div>\n        )\n\n      default:\n        return(\n          <div>\n            Hi {this.state.user}!\n            <button onClick={this.Logout}>LOGOUT</button>\n          </div>\n        )\n    }\n  }\n\n}\n\nexport default StrapiAuth;\n"]},"metadata":{},"sourceType":"module"}